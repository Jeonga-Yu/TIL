http
===
> 책 '프로가 되기 위한 웹기술 입문' 정리

통신 프로토콜은 정보를 주고받기 위한 약속으로서 주로 정보의 전달 방법과 정보의 의미를 규정하는 것이다.
WWW의 세계에서 HTML을 주고받기 위해 규정된 프로토콜이 HTTP(Hyper Text Markup Language)다.

## 요청

### 요청헤더
요청 헤더(Request Header)의 첫 부분에는 요청 라인이 나와있으며 HTTP 요청에서 가장 중요한 부분이다.

> GET http://www.test.com/index.html HTTP/1.1
메서드와 URI, HTTP 버전으로 나뉜다.

 - 메서드
 요청의 종류를 나타낸다. 여기서의 GET은 'URI에서 지정한 정보를 보내 주세요'라는 의미가 된다.

 - URI
 GET메서드는 단순히 '정보를 주세요.'라는 의미이다. URI(Uniform Resource Identifire)는 '무엇을 원하는가?'를 나타낸다.

 - HTTP 버전
 버전에 따라 이용할 수 있는 메서드의 종류와 요청 헤더의 종류가 달라지므로 어떤 버전에 따른 요청인지 지정한 것이다.

 ### 메세지 헤더
 요청의 부가적인 정보를 나타낸다.

 >형식
> 필드 이름 : 필드 값

- Accept
웹 클라이언트가 받을 수 있는 데이터의 종류를 표시한 것이다.
데이터의 종류는 Content-Type 이라는 형식으로 표시되며, 클라이언트에서 받을 수 있는 Content-Type을 콤마로 구분해서 지정한다.
텍스트 파일은 text/plain 이미지는 image/jpeg 등이다.

- Accept-Language
웹 클라이언트가 받을 수 있는 자연 언어의 종류를 나타낸다. Accept-Language 헤더에 따라 웹 서버가 클라이언트가 사용하는 언어에 맞는 콘텐츠를 보낼 수 있다.

- User-Agent
이용 중인 웹 브라우저의 종류와 버전을 나타낸다
웹 서버가 접속해 온 클라이언트의 종류에 맞춰 최적의 콘텐츠를 돌려주는 데 사용된다.

- Host
요청을 보낸 곳의 호스트명과 포트 번호를 지정한다.

## 응답

- 상태 라인

>HTTP/1.1 200 OK
HTTP 버전과 상태 코드, 응답 구문으로 세 부분으로 나뉜다.

HTTP 버전은 요청과 마찬가지로 사용하는 프로토콜의 버전을 나타낸다. 200은 요청이 성공해 정상적인 응답이 돌아왔음을 나타내는 상태 코드다.

> 응답 상태코드
상태 코드 | 의미 | 설명
---|---|---|
1xx | Information | 요청 처리가 계속되고 있음을 나타낸다
2xx | Success | 요청이 성공했음을 나타낸다
3xx | Redirection | 요청을 종료하려면 작업이 더 필요함을 나타낸다
4xx | Client error | 클라이언트 측에 기인한 오류로 요청이 실패했음을 나타낸다
5xx | Server error | 서버 측에 기인한 오류로 요청이 실패했음을 나타낸다

- 메시지 헤더
HTTP 요청의 메시지 헤더와 같은 형식으로 응답에 관한 부가적인 정보가 들어있다.

- 메시지 본문

## IP
인터넷에 접속된 모든 컴퓨터는 IP주소라는 숫자로 식별된다.
> 192.168.0.1
마침표로 구분된 네 가지 숫자의 조합으로 표시된다. 각 숫자는 0부터 255까지 256가지이다.
약 43억가지의 숫자를 나타낼 수 있다.

이와 같은 숫자의 조합은 컴퓨터로서 편리하지만 사람은 기억하기가 불편하다.

IP주소는 ICANN이 관리하고 있으며, 한국에서는 KISA가 위탁받아 국내의 IP를 관리하며 여기에 신청해야 IP 주소를 할당받을 수 있다.
우리가 집에 있는 컴퓨터에서 인터넷에 접속할 때 일일이 IP주소를 신청하지는 않는다.
인터넷 서비스 프로바이더(ISP)가 대량의 IP주소를 확보해놓고 우리가 인터넷에 접속할 때마다 ISP가 확보한 IP 주소 중 하나를 일시적으로 할당받는 방식이다

## 글로벌 IP, 사설 IP
이렇게 할당된 IP주소는 인터넷상에서 유일한 주소가 되며, __글로벌 IP 주소__라고 한다.
IP주소는 인터넷의 이용 뿐 아니라 컴퓨터를 비롯한 현재의 네트워크 기기가 서로 정보를 주고받는 데 필요하다.
인터넷을 사용하지 않더라도 사무실이나 가정에서 네트워크를 구축하려면 각 기기에 IP주소가 있어야 한다.
이처럼 인터넷 등 다른 네트워크에 접속돼 있지 않은 네트워크를 __사설 네트워크(Private Network)__라고 한다.
IP주소는 네트워크에 접속된 호스트를 식별하기 위한 것이었다. 그러므로 사설 네트워크상에서 글로벌 IP주소를 사용할 필요는 없다.
어떤 사설 네트워크에서 사용되고 있는 IP주소가 다른 사설 네트워크에서도 사용되고 있더라도 서로 네트워크가 연결돼 있지 않으므로 아무런 문제도 일어나지 않는다.
사설 IP 주소는 어떤 일정 범위의 IP주소를 사설 네트워크에서 자유롭게 이용할 수 있게 예약한 것이다.

예를들어 글로벌 IP주소는 전국에서 통영되는 유선 전화의 전화번호에 해당하고 사설 IP주소는 사무실이나 학교 등에서 사용되는 구내전화의 내선 번호에 해당한다.

사설 IP 주소 | 클래스 | 이용 가능한 수
---|---|---|
10.0.0.0 ~ 10.255.255.255 | 클래스 A | 16,777,217개 
172.16.0.0 ~ 172.31.255.255 | 클래스 B | 1,048,576개
192.168.0.0 ~ 192.168.255.255 | 클래스 C | 65,536개

## DNS
Domain Name Server
DNS는 도메인명과 IP주소의 대응표를 가진 컴퓨터(DNS서버)를 인터넷상에 배치해 놓고 있으면서 DNC서버에 문의하면 도메인명에 대응하는 IP주소를 가르쳐 준다.

>nslookup URL
명령 프롬프트에 위 명령어를 입력하면 
입력한 URL에 대응하는 IP주소를 확인할 수 있다.

## 포트번호
TCP/IP를 통해 정보를 수신하는 애플리케이션은 반드시 수신 대기 포트를 결정하고 정보를 기다린다.
포트는 0~65,535까지의 숫자로 표시되며 여러 개의 애플리케이션이 같은 포트를 이용할 수는 없다.
보통 브라우저는 URL에 포함된 스킴을 통해 HTTP 프로토콜을 사용한다는 사실을 안 시점에서 URL내에 포트 번호가 지정되지 않았다면 80번 포트를 수신포트로 설정한다.
이와 같은 약속 덕분에 평소에 웹 사이트를 볼 때 포트 번호까지 신경 쓰지 않아도 된다.


## TCP/IP
IP주소를 알면 특정 호스트를 지정할 수 있으므로 해당 호스트로 임의의 정보를 보낼 수 있다. TCP/IP라는 프로토콜이 그 역할을 한다.

브라우저 등으로부터 받은  HTTP 요청 등의 정보를 패킷(Packet)이라고 하는 작은 단위로 분할해 송신하며, 정보를 받은 쪽에서 그것을 원래대로 조립한 다음 송신처인 웹 서버 등의 애플리케이션으로 넘긴다.
패킷의 송수신은 TCP/IP가 책임지고 수행한다.

